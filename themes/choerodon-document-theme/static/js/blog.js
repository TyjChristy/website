function IsPC(){for(var t=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),e=!0,a=0;a<n.length;a++)if(0<t.indexOf(n[a])){e=!1;break}return e}var isPC=IsPC();$(".navbar-collapse .select").on("click",function(){$(this).next(".select-menu").toggleClass("none block")}),$("#navbar-collapse-bg").on("click",function(t){$(t.target).hasClass("navbar-collapse-bg")&&$(".navbar-buttons button").trigger("click")}),$(".navbar-buttons button").on("click",function(){$("#navbar-collapse-bg").toggleClass("none block"),$("#select-menu").hasClass("block")&&$("#select-menu").toggleClass("none block")}),jQuery(".navbar-collapse .haschildren").hover(function(t){$(this).children("ul").toggleClass("none block")},function(t){$(this).children("ul").removeClass("block")});var topValue=$(window).scrollTop(),interval=null;function isScrolling(){document.documentElement.scrollTop==topValue&&(navStatusTop?0!=$(window).scrollTop()&&($("#navbar").removeClass("top-nav"),$("#navbar").addClass("fixed-nav"),navStatusTop=!1):0==$(window).scrollTop()&&"true"!=$(".navbar-buttons button").attr("aria-expanded")&&1!=$(".navbar-left-buttons button.open").length&&($("#navbar").removeClass("fixed-nav"),$("#navbar").addClass("top-nav"),navStatusTop=!0),clearInterval(interval),interval=null)}if(document.onscroll=function(){null==interval&&(interval=setInterval("isScrolling()",100)),topValue=document.documentElement.scrollTop},0==$(window).scrollTop()){var navStatusTop=!0;$("#navbar").removeClass("fixed-nav"),$("#navbar").addClass("top-nav")}else{navStatusTop=!1;$("#navbar").removeClass("top-nav"),$("#navbar").addClass("fixed-nav")}function calRem(){var t=remWidth,n=t/14.4;return t<768&&(n=t/3.75),n}jQuery(document).ready(function(){function t(){1==$(".navbar-left-buttons").children("button.open").length?($(".navbar-left-buttons").children("button").removeClass("open"),$(".docs").css("left","-"+$(".docs-menu").css("min-width"))):($(".navbar-left-buttons").children("button").addClass("open"),$(".docs").css("left","0"))}jQuery(".navbar-buttons").on("click",function(){1==$(".navbar-left-buttons button.open").length&&t()}),jQuery(".navbar-left-buttons").on("click",function(){"true"==$(".navbar-buttons button").attr("aria-expanded")&&$(".navbar-buttons button").trigger("click"),t()})}),jQuery(document).ready(function(){jQuery(".icon-wechat-footer").hover(function(t){if(768<=remWidth){var n=calRem(),e=$(".wechat-hover"),a=e.children("img"),o=$(this).offset().top-parseInt(e.css("height"))-20,s=document.documentElement.clientWidth/2-parseInt(e.css("width"))+2.5*parseInt($(this).css("margin-left"));a.attr("src",a.attr("data-src")),e.css("display","block").css("top",o/n+"rem").css("left",s/n+"rem").fadeIn("fast")}},function(){768<=remWidth&&$(".wechat-hover").css("display","none")}),$(".social .load-img>img").on("load",function(){$(this).parent(".load-img").children("[data-loader='circle']").attr("data-loader","")}),jQuery(".icon-sina-footer").hover(function(t){if(768<=remWidth){var n=calRem(),e=$(".sina-hover"),a=e.children("img"),o=$(this).offset().top-parseInt(e.css("height"))-20,s=$(this).offset().left-parseInt(e.css("width"))/2+parseInt($(this).css("width"))/2;a.attr("src",a.attr("data-src")),e.css("display","block").css("top",o/n+"rem").css("left",s/n+"rem").fadeIn("fast")}},function(){768<=remWidth&&$(".sina-hover").css("display","none")}),$(".icon-wechat-footer").on("touchstart",function(){setTimeout(function(){stopBodyScroll(!0),$(".black-big-img img").attr("src",$(".wechat-hover>img").attr("data-src")),$(".black-big-img").css("display","flex")},300)})}),$(".black-big-img").on("click",function(){return $(this).hasClass("n-max")||($(".black-big-img").css("display","none"),stopBodyScroll(!1)),!0});var oldTop=0;function stopBodyScroll(t){var n=document.body;t?(oldTop=$(window).scrollTop(),n.style.position="fixed",n.style.top=-oldTop+"px"):(n.style.position="",n.style.oldTop="",window.scrollTo(0,oldTop))}!function(t){document.documentElement.clientWidth;var n=document.documentElement.clientHeight-parseInt(t("#navbar").css("height"))-parseInt(t("#footer").css("height")),e=calRem();t("#content").css("min-height",n/e+"rem")}(jQuery),jQuery(".navbar .global-language").hover(function(t){$(this).children(".language-list").css("display","block")},function(t){$(this).children(".language-list").css("display","none")}),jQuery(document).ready(function(){isPC&&window.location.hash&&$(".content-post a").click(function(){var t=$("#navigation").css("height");$("html, body").animate({scrollTop:$(decodeURIComponent(window.location.hash)).offset().top-t.split("px")[0]},500)})});var $results,INDEX_DATA={};function initLunr(){$.getJSON("/lunr.json").done(function(t){INDEX_DATA=t}).fail(function(t,n,e){var a=n+", "+e;console.error("Error getting Hugo index flie:",a)})}function initUI(){$results=$("#content-post"),$("#content").on("click","#search",function(){$("#content-post").html(""),$("#content-post #blog-list").remove(),$("#content-post #paginator").remove();var t=$("#search-input").val(),n=search(t,500);void 0===n||0===n.length?($("#content-post .noresult").remove(),$results.append("<h1 class='noresult'>很抱歉，我们没有找到与“"+t+"“相关的博客</h1>")):renderResults(n)})}function escapeReg(t){return String(t).replace(/([\*\.\?\+\$\^\[\]\(\)\{\}\|\/\\])/g,"\\$1")}function search(t,n){if(null!=t&&""!==t.trim()){var e=[],a=-1;for(var o in INDEX_DATA)-1!==(a=INDEX_DATA[o].body.toLowerCase().indexOf(t.toLowerCase()))&&e.push({url:INDEX_DATA[o].url.toLowerCase(),title:INDEX_DATA[o].title,date:INDEX_DATA[o].date,author:INDEX_DATA[o].author,description:INDEX_DATA[o].description,tags:INDEX_DATA[o].tags,categories:INDEX_DATA[o].categories,img:INDEX_DATA[o].img,body:INDEX_DATA[o].body.substr(Math.max(0,a-50),n).replace(new RegExp("("+escapeReg(t)+")","gi"),'<span style="background:#ff0;">$1</span>')});return e}}function renderResults(t){if(t.length){$("#content-post .noresult").remove();var c="/zh/";-1!=window.location.href.indexOf("/en/")&&(c="/en/"),t.slice(0,10).forEach(function(t){var n="分类",e="作者";"/en/"==c&&(n="Tags",e="Author");var a=$('<div class="row blog-list" id="blog-list"></div>'),o=$('<div class="blog-list-content" style="width:100%">'),s=$('<a href="'+c+t.url+'"class="right-title">'+t.title+"</a>"),i=$('<div class="right-info"><span class="right-user">'+e+"：<span>"+t.author+'</span></span><span class="right-categories">'+n+': <a href="'+c+"/categories/"+t.categories[0].toLowerCase()+'">'+t.categories[0]+'</a></span><span class="right-time"><i class="iconfont">&#xe8cf;</i>'+t.date+"</span></div>"),r=$('<div class="right-text">'+t.body+"</div>"),l=$('<ul class="right-tags">');for(index=0;index<t.tags.length;index++)l.append('<li class="tag"><a class="tag-text" href="'+c+"/tags/"+t.tags[index].toLowerCase()+'"><i class="iconfont">&#xe844;</i> '+t.tags[index]+"</a></li>");l.append("</ul");o.append(s),o.append(i),o.append(r),o.append(l),o.append("</div>"),a.append(o),a.append("</div>"),$results.append(a)})}}$(document).ready(function(){initLunr(),initUI()}),$(".blog-single-body img").on("click",function(){if(!$(this).hasClass("n-max")){stopBodyScroll(!0),$(".black-big-img").css("display","flex");var t=$(this).attr("src");$(".black-big-img img").attr("src",t)}return!0}),$(".share-title").on("click",function(){$(".share-box").hasClass("active")?($(".share-box").removeClass("active"),setTimeout(function(){$(".share-box span").css("display","none")},500)):($(".share-box").addClass("active"),$(".share-box span").css("display","inline-block"))});var ShareTip=function(){};ShareTip.prototype.sharetosina=function(t,n){var e="http://v.t.sina.com.cn/share/share.php?title="+t+"&url="+n+"&content=utf-8&sourceUrl="+n;window.open(e,"newwindow","height=400,width=400,top=100,left=100")},$(".shareSina").on("click",function(){var t=$(".blog-single-head h1").text(),n=$(".blog-single-head h2").text(),e=$(this).attr("data-click-url");(new ShareTip).sharetosina(t+"  "+n,e)}),$(".shareWX").on("click",function(){var t=$(this).attr("data-click-url");$(".share-wx-alert").css("display","flex"),$("#wxCode").empty().qrcode({render:"canvas",text:t})}),$(".wx-box-close").on("click",function(){$(".share-wx-alert").css("display","none")}),$(".share-wx-alert").on("click",function(){$(".share-wx-alert").css("display","none")});