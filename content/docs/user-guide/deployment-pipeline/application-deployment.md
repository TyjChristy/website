+++
title = "应用部署"
description = "提供可视化、一键式部署应用，支持并行部署和流水线无缝集成，实现部署环境标准化和部署过程自动化"
weight = 3
+++

# 应用部署

提供可视化、一键式部署应用，支持并行部署和流水线无缝集成，实现部署环境标准化和部署过程自动化，点击部署后，平台将相关的操作发送至 **环境管理**创建的环境，然后环境对应的集群客户端执行相关的helm命令和k8s-api-server交互。常见的有helm install和helm upgrade，即实例创建和实例升级。
  
  - **菜单层次**：项目层
  - **菜单路径**：部署流水线 > 应用部署
  - **默认角色**：项目所有者、项目成员（环境成员）
  <blockquote class="note">
       只有项目所有者和被分配环境权限的项目成员才能在某个环境中部署某个应用；同时可以从应用市场详情页点击部署，到相应的环境进行部署操作。
    	  </blockquote>

## 部署应用
部署应用指应用的某一个版本部署至指定环境的操作，提供可视化、一键式部署应用，支持并行部署和流水线无缝集成，实现部署环境标准化和部署过程自动化。

#### 操作流程:

 1. 选择将要部署的应用，可选择应用有2种，一种为项目下的应用，另外一种为应用市场的应用。这些应用都必须处于启用状态，且已生成应用版本；

 2. 选择将要部署的应用的版本；

 3. 选择要部署的已连接环境；（若所选的环境状态为故障中，则不能完成部署应用的操作）  

 4. 选择部署模式；（部署模式有新建实例和替换实例两种）

    - 新建实例：建立新的实例。新建一个全新的实例，对应helm install操作

    - 替换实例：滚动更新已创建实例。能选到的实例为应用在该环境上所部署的实例，对应helm upgrade操作，若只有一个可用实例则会默认选上

 5. 选择部署配置；（此处可以直接从已有的部署配置中进行选择并使用，或者直接在默认values的基础上进行修改）  
    
    - 若项目中暂时没有所选应用和环境的部署配置，此时编辑器中会出现默认的初始values文件，用户可在此基础上进行修改。待修改完成，点击下一步时，用户可以根据提示以此配置信息为基础创建一个部署配置，创建后，下次部署时便可直接选中并使用该部署配置中的配置信息。  
    - 若选中一个部署配置，编辑器中会出现该部署配置中的配置信息，用户可直接使用，或者在此基础上进行修改。待修改完成，点击下一步时，用户可以根据提示将此次的修改覆盖至对应的部署配置，以供全局的部署任务选择与使用。
     	<blockquote class="warning">
      目前暂时不支持从界面删除参数。
    	  </blockquote>
    
    ![configuration](/docs/user-guide/deployment-pipeline/image/deploy1.png)

    - 部署values有四种显示格式：
        - 新增：新增的参数行，显示绿色
        - 修改：修改values值后，显示为黄色块
        - 红色x: yaml格式错误的行，显示红色x
        - 未改变：默认色
      	<blockquote class="note">
       在该编辑器模式中，yaml格式的校验是实时的，每次只会返回一个yaml格式错误，即使文件有多行报错。只有将上一个错误修改正确。 
       每修改一次部署values的值都会校验一次yaml格式，有错就会界面上用红色x提示，鼠标移到红色x上会显示具体的报错信息。yaml格式不正确不能点击下一步。但是当版本里面的values文件有yaml格式错误时，无法通个过界面修改yaml格式错误，只能修改代码内的values文件并且生成新的版本，重新部署新的版本。
    	  </blockquote>


 6. 确认部署信息；
      
    ![deployment confirm](/docs/user-guide/deployment-pipeline/image/deploy2.jpg)
      
 7. 点击 `部署应用` 按钮，完成部署。 

## 更多操作
- [环境总览](../environments-overview)
- [环境管理](../environment-pipeline)
- [容器管理](../container)
- [网络管理](../service)
- [部署配置](../deployment-config)

